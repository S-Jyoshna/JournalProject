<!DOCTYPE html>
<html>
<head>
    <title>Your Journal</title>
    <link href="https://fonts.googleapis.com/css2?family=Special+Elite&family=Indie+Flower&family=Nanum+Pen+Script&family=Caveat&family=Dancing+Script&family=Shadows+Into+Light&display=swap" rel="stylesheet">
    <style>
        :root {
            --selected-font: 'Special Elite', cursive;
        }

        body {
            font-family: var(--selected-font);
            background: #f5e9d4 url('https://www.transparenttextures.com/patterns/paper-fibers.png');
            padding: 40px;
        }

        h2 {
            color: #3e2f1c;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.2em;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        a.button {
            background-color: #6c4f3d;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: bold;
        }

        form.logout-form button {
            background: none;
            border: none;
            color: #6c4f3d;
            text-decoration: underline;
            cursor: pointer;
            font-size: 1rem;
        }

        .font-selector {
            font-size: 0.9em;
            margin-left: 20px;
        }

        .search-box {
            text-align: center;
            margin: 20px 0 30px 0;
        }

        .search-box input[type="text"] {
            padding: 8px;
            width: 300px;
            border-radius: 6px;
            border: 1px solid #a1896f;
            background: #fffaf3;
            font-family: inherit;
        }

        .search-box button {
            padding: 8px 16px;
            background-color: #6c4f3d;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-family: inherit;
        }

        .search-box a {
            color: #3e2f1c;
            margin-left: 10px;
        }

        .entry-list {
            max-width: 700px;
            margin: auto;
        }

        .entry-item {
            background: #fcf7e8;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 12px;
            border: 2px solid #d3c2a3;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .entry-item a {
            font-size: 1.4em;
            text-decoration: none;
            color: #3e2f1c;
        }

        .entry-item small {
            display: block;
            font-size: 0.9em;
            color: #7a6c59;
            margin-top: 5px;
        }

        .pagination {
            text-align: center;
            margin-top: 40px;
            font-size: 1.1em;
        }

        .pagination a {
            margin: 0 10px;
            text-decoration: none;
            color: #6c4f3d;
            font-weight: bold;
        }

        .pagination span {
            color: #3e2f1c;
        }
    </style>
</head>
<body>

    <div class="top-bar">
        <div>
            <a href="{% url 'add_entry' %}" class="button">‚úçÔ∏è Add New Entry</a>
        </div>
        <div style="display: flex; align-items: center;">
            <label for="fontStyle" style="margin-right: 5px; color: #3e2f1c;">Font:</label>
            <select id="fontStyle" class="font-selector">
                <option value="'Special Elite', cursive">Vintage (Default)</option>
                <option value="'Indie Flower', cursive">Indie Flower</option>
                <option value="'Nanum Pen Script', cursive">Nanum Pen Script</option>
                <option value="'Caveat', cursive">Caveat</option>
                <option value="'Dancing Script', cursive">Dancing Script</option>
                <option value="'Shadows Into Light', cursive">Shadows Into Light</option>
            </select>
            <form method="post" action="{% url 'logout' %}" class="logout-form" style="margin-left: 20px;">
                {% csrf_token %}
                <button type="submit">Logout</button>
            </form>
        </div>
    </div>

    <h2>üìñ Your Vintage Journal</h2>


    <div class="search-box">
    <form method="get">
        <input type="text" name="q" placeholder="üîçSearch by title, date (YYYY-MM-DD), or page number" value="{{ query|default:'' }}">
        <button type="submit">Search</button>
        {% if query %}
            <a href="{% url 'home' %}">Clear</a>
        {% endif %}
    </form>
    {% if result_message %}
        <p>{{ result_message }}</p>
    {% endif %}
</div>


<div class="entry-list">
    {% for entry in page_obj %}
        <div class="entry-item">
            <a href="{% url 'entry_detail' entry.id %}">{{ entry.title }}</a>
            <small>{{ entry.date_created|date:"F j, Y, g:i A" }}</small>
        </div>
    {% empty %}
        <p>No entries found. <a href="{% url 'add_entry' %}">Add your first entry</a>!</p>
    {% endfor %}
</div>


    <div class="pagination">
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}{% if query %}&q={{ query }}{% endif %}">‚Üê Previous</a>
        {% endif %}
        <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}{% if query %}&q={{ query }}{% endif %}">Next ‚Üí</a>
        {% endif %}
    </div>

    <script>
        const selectFont = document.getElementById('fontStyle');
        const savedFont = localStorage.getItem('selectedFont');
        if (savedFont) {
            document.documentElement.style.setProperty('--selected-font', savedFont);
            selectFont.value = savedFont;
        }

        selectFont.addEventListener('change', function () {
            const font = this.value;
            document.documentElement.style.setProperty('--selected-font', font);
            localStorage.setItem('selectedFont', font);
        });
    </script>
</body>
</html>
